# 游戏逻辑

[toc]

------

## AI

1. 巡逻小怪
   - 随机出生
   - 随机溜达
   - 当 距离<x 通知场景，切bgm
   - 速度始终小于人（梯度变化）
   - 当距离> x，再次随机巡逻，切bgm
2. 中间boss
   - 只在中间4*4 / 5\*5范围移动
   - 平时待在正中间一动不动
   - 人进入领地（切bgm2）
     - 速度一直大于人
     - 不能超出自己的领地
   - 当人成功逃离领地的时候，再次走回到正中间（切bgm2）
3. ai不能吃道具，穿过道具





## Hero

- 属性

  - 生命值
  - 生命上限值
  - san值
  - 碎片
    - 文字（一段话）
    - prefab(kind)
  - 速度multiplier
  
- 与道具

  - 吃❤️ - 回生命 5点

    ```
    ❤️碰撞
    	血量 + 1
    	if 血量 > 血量上限
    		血量 = 上限
    	
    	更新UI
    ```

  - 吃🔥 - 回san +10

  - 吃🧩 - 左上角的UI显示这个碎片

- 受伤判定

  - 小怪
    - 当碰撞的时候，小怪scale放大3倍，慢慢的fade，然后destroy
    - 再随机生成一个新的
    - 生命值 -1
  - boss
    - 当距离小于y时，视为受伤
    - 生命值 -2
    - 蒙版掉血（动画
    - 冷却10s（呆在原地不动，取消所有判定）
  - 当血量<=3时
    - UI加上干扰视线内容
    - 速度  * 3/4

- 脚步声

- san判定

  - 一直下降 1/s
  - 当san为0的时候
    - 血量上限减少到3
    - 保持san为0



## 地图

- 墙顶端设置不同材质(或者考虑两个cube构建一面墙)

  > https://blog.csdn.net/nanggong/article/details/54969867
  >
  > https://blog.csdn.net/n_moling/article/details/88823634

- 小地图 - 添加一个天空镜头

  - 人
  - AI
  - 碎片
  - 墙

  > https://blog.csdn.net/l773575310/article/details/73100522





## 游戏判定

- 开始
  - 出生地在场景中固定
  - boss在场景中固定
  - 血量为5
  - san为100
  - 随机产生巡逻小怪
- 暂停（玩家自己点了暂停按钮）
  - 人不动
  - AI所有逻辑停掉
    - 寻路
    - 冷却
    - 移动
    - 。。。
  - san的定时器取消
- 继续游戏
- 结束
  - 人的血量为0，蒙版动画，失败
  - 集齐9个碎片，蒙版动画，成功
  - 跳到主界面

